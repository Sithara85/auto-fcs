---
title: "workspaceMapper"
author: "JL"
date: "3/31/2017"
output: html_document
---

# Mapping workspace to individual fcs files for correlation metrics


```{r collect,eval=TRUE,fig.width=10,fig.height=8}
library(openCyto)
library(ggcyto)
library(flowCore)
# out = "/home/tsaim/lane0212/git/auto-fcs/explore/openCyto/fcsMSIMap.txt"
# wsDir = "/home/thyagara/shared/HRS/manualFinal/consolidated/"
out = "/Users/Kitty/git/auto-fcs/explore/openCyto/fcsLOCALMAP.txt"
wsDir = "/Volumes/Beta/data/flow/testManualGates/"
wsps <-
  list.files(wsDir,
             pattern = "wsp$",
             full = TRUE,recursive = TRUE)

print(paste0("Found ",length(wsps)," wsps"))
df = data.frame(
  WSP = character(0),
  FCS = character(0)
)

for(file in wsps){
   ws <- openWorkspace(file)
  s= getSamples(ws)
  # print(paste(file,"\t",s[2]$name))
  tmp = data.frame(
  WSP = file,
  FCS = s[2]$name
)
  
  df = rbind(df,tmp)
}

write.table( df,file =out,sep = "\t",quote = FALSE,row.names = FALSE)
```



for samples in ws:

print ws file, sample


load and gate for sample, 

plot proportions for auto and manual

